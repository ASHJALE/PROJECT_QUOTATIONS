{% extends 'base.html' %}
{% load widget_tweaks %}

{% block content %}
{% if user.is_authenticated %}
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h2 class="text-center mb-4">Request a Quote</h2>
                        
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-{{ message.tags }}">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        {% endif %}
                        
                        <form method="post" novalidate>
                            {% csrf_token %}
                            
                            {% for field in form %}
                                <div class="form-group mb-3">
                                    <label for="{{ field.id_for_label }}" class="form-label">
                                        {{ field.label }}
                                    </label>
                                    {% render_field field class="form-control" %}
                                    {% if field.errors %}
                                        <div class="text-danger">
                                            {% for error in field.errors %}
                                                <small>{{ error }}</small>
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                    {% if field.help_text %}
                                        <small class="form-text text-muted">{{ field.help_text }}</small>
                                    {% endif %}
                                </div>
                            {% endfor %}
                            
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary">Submit Quote Request</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% else %}
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-6">
                <h2>Request a Quote</h2>
                <p class="lead">Get accurate estimates for your construction projects.</p>
                <div class="alert alert-info">
                    <h4 class="alert-heading">Login Required</h4>
                    <p>To request a quote, please log in or create an account. It's quick and easy!</p>
                    <hr>
                    <a href="{% url 'login' %}" class="btn btn-primary mr-2">Login</a>
                    <a href="{% url 'signup' %}" class="btn btn-secondary">Sign Up</a>
                </div>
            </div>
            <div class="col-md-6">
                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="https://via.placeholder.com/600x400.png?text=Construction+Project+1" class="d-block w-100" alt="Construction Project 1">
                        </div>
                        <div class="carousel-item">
                            <img src="https://via.placeholder.com/600x400.png?text=Construction+Project+2" class="d-block w-100" alt="Construction Project 2">
                        </div>
                        <div class="carousel-item">
                            <img src="https://via.placeholder.com/600x400.png?text=Construction+Project+3" class="d-block w-100" alt="Construction Project 3">
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-md-4">
                <h3>Quality Work</h3>
                <p>Our team of experts ensures top-notch quality in every project.</p>
            </div>
            <div class="col-md-4">
                <h3>Competitive Pricing</h3>
                <p>Get the best value for your money with our competitive quotes.</p>
            </div>
            <div class="col-md-4">
                <h3>Timely Delivery</h3>
                <p>We pride ourselves on completing projects on time, every time.</p>
            </div>
        </div>
    </div>
{% endif %}

<style>
    .card {
        margin-top: 50px;
        border-radius: 15px;
        border: none;
    }
    
    .card-body {
        padding: 40px;
    }
    
    .form-control {
        border-radius: 8px;
        padding: 10px 15px;
    }
    
    .btn-primary {
        border-radius: 8px;
        padding: 10px;
        font-weight: 500;
    }
    
    label {
        font-weight: 500;
        margin-bottom: 5px;
    }

    .carousel-item img {
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    h3 {
        color: #007bff;
    }
</style>
{% endblock %}